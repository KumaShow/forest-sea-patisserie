import{_ as b,m as i,i as l,c as a,a as s,b as f,F as w,j as v,d as y,g as o,t as e,r as g,o as c}from"./index-c79f23f6.js";import{u as _}from"./CartStore-03ab6abf.js";import{u as m}from"./OrderStore-8200886c.js";import{O as T}from"./OrderTimeLine-0d485258.js";import"./sweetalert2.all-ac9b5f9e.js";import"./ToastMessageStore-851a6cf0.js";const{VITE_API:k,VITE_API_PATH:O}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"benson-vue3",BASE_URL:"/forest-sea-patisserie/",MODE:"production",DEV:!1,PROD:!0},$={components:{OrderTimeLine:T},props:["id"],data(){return{step:2}},computed:{...i(_,["cart"]),...i(m,["order"])},methods:{...l(_,["deleteCartItem","updateCartItem"]),...l(m,["getOrder","createDate"]),postPayment(t){const n=`${k}/api/${O}/pay/${t}`;this.$http.post(n,t).then(()=>{this.getOrder(this.order.id),this.$router.push({name:"checkOrderCompleted",params:{id:this.order.id}})}).catch(d=>{alert(d)})}},mounted(){this.getOrder(this.id)}},I={class:"bg-mask-texture"},P={class:"check-order container py-11"},V=s("h2",{class:"mb-9 font-serif text-center"},"確認結帳",-1),E={class:"mb-9"},A={class:"row justify-content-center mb-11 g-8"},C={class:"col-md-7"},N=s("h2",{class:"my-6 fs-5"},"確認付款內容",-1),x={key:0,class:"p-1"},D={class:"col overflow-hidden"},L=["src","alt"],S={class:"col-8"},j={class:"fs-7 fs-md-5 mb-2"},B={class:"fs-8 fs-md-7 mb-1 text-truncate-2 text-neutral-700"},M={class:"d-flex justify-content-between align-items-center"},F={class:"mt-6 text-end"},H={class:"fs-4 fw-bold"},R={class:"col-md-5"},U={class:"p-8 bg-white border"},q={class:"mb-8"},z=s("h2",{class:"mb-6 fs-5"},"訂單資訊",-1),G={class:"row mb-2"},J=s("span",{class:"w-auto me-auto"},"訂購時間 :",-1),K={class:"row mb-2"},Q=s("span",{class:"w-auto me-auto"},"訂單編號 :",-1),W={class:"row mb-2"},X=s("span",{class:"w-auto me-auto me-auto"},"付款狀態 :",-1),Y={key:0,class:"text-success p-0 w-auto"},Z={key:1,class:"text-danger p-0 w-auto"},ss=s("h2",{class:"mb-6 fs-5"},"訂購人資料",-1),ts={class:"row mb-2"},es=s("span",{class:"col-4 me-auto"},"姓名 :",-1),os={class:"row mb-2"},rs=s("span",{class:"col-4 me-auto"},"Email :",-1),as={class:"row mb-2"},cs=s("span",{class:"col-4 me-auto"},"電話 :",-1),ns={class:"row mb-2"},ds=s("span",{class:"col-4 me-auto"},"地址 :",-1),is={class:"row mb-2"},ls=s("span",{class:"col-4 me-auto"},"留言 :",-1),_s={class:"text-end"};function ms(t,n,d,ps,p,u){const h=g("OrderTimeLine");return c(),a("div",I,[s("main",P,[V,s("div",E,[f(h,{step:p.step},null,8,["step"])]),s("div",A,[s("div",C,[N,t.order?(c(),a("ul",x,[(c(!0),a(w,null,v(t.order.products,r=>(c(),a("li",{key:r.id,class:"product-item row align-items-center gx-4 border-bottom pb-6"},[s("div",D,[s("img",{src:r.product.imageUrl,alt:r.product.title,class:"object-cover w-100",style:{"max-height":"150px"}},null,8,L)]),s("div",S,[s("h4",j,e(r.product.title),1),s("p",B,e(r.product.description),1),s("div",M,[s("div",null,[s("p",null," NT$ "+e(Math.round(r.final_total))+" x "+e(r.qty),1)])])])]))),128))])):y("",!0),s("div",F,[s("p",H,[o(" 總計: "),s("span",null,"NT$ "+e(Math.round(t.order.total)),1)])])]),s("section",R,[s("div",U,[s("div",q,[z,s("ul",null,[s("li",G,[J,o(" "+e(t.createDate(t.order.create_at)),1)]),s("li",K,[Q,o(" "+e(t.order.id),1)]),s("li",W,[X,t.order.is_paid?(c(),a("span",Y," 已付款 ")):(c(),a("span",Z,[o(" 尚須付款 "),s("b",null,"NT$ "+e(Math.round(t.order.total)),1)]))])])]),s("div",null,[ss,s("ul",null,[s("li",ts,[es,o(" "+e(t.order.user.name),1)]),s("li",os,[rs,o(" "+e(t.order.user.email),1)]),s("li",as,[cs,o(" "+e(t.order.user.tel),1)]),s("li",ns,[ds,o(" "+e(t.order.user.address),1)]),s("li",is,[ls,o(" "+e(t.order.message),1)])])]),s("div",_s,[s("button",{type:"button",class:"btn btn-primary mt-8 w-lg-100 px-6 px-md-10 py-2 py-md-4 rounded-1",onClick:n[0]||(n[0]=r=>u.postPayment(t.order.id))}," 確認付款 ")])])])])])])}const ys=b($,[["render",ms]]);export{ys as default};
